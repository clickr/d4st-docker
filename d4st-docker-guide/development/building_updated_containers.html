<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Building, Testing, and Releasing Updated Containers</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="concept"><meta name="description" content="How to build new versions of the various D4ST Docker containers."><meta name="DC.Relation" scheme="URI" content="development-guide.html"><meta name="DC.Creator" content="W. Eliot Kimber"><meta name="DC.Date.Created" content="2016-01"><meta name="DC.Date.Modified" content="2016-02-20"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="building_updated_containers"><script type="text/javascript">var d4p = {"relativePath":"..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"d4st-docker-guide\/system-description\/chapter-d4st-container-system-description.html","previousTopicHref":"d4st-docker-guide\/development\/local_docker_setup.html","ext":".html","root":false,"topic":{"chunked":""},"map":{"title":"  DITA for Small Teams  D4ST Docker Usage Guide  ","chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" href="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../../themes/dita-d4p-classic/js/script.js"></script></head><body class=" dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">  DITA for Small Teams  D4ST Docker Usage Guide  </h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><section class="clearfix"></section></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../../index.html">Table of Contents</a></li><li><a href="../frontmatter/about-d4st-docker-guide.html">About This Publication</a></li><li class="collapsible collapsed"><a href="../getting-started/getting-started.html"><span class="enumeration enumeration0">Chapter&nbsp;1. </span>Getting Started</a><ul><li><a href="../getting-started/d4st-container-quick-start-01.html">D4ST Container Quick Start</a></li><li><a href="../getting-started/setup-command-completion.html">Setting Up Command Completion for the d4st Command</a></li></ul></li><li class="collapsible collapsed"><a href="../extending/extending_the_d4st_docker_system.html"><span class="enumeration enumeration0">Chapter&nbsp;2. </span>Extending the D4ST Docker System</a><ul><li><a href="../extending/building_the_d4st_containers.html">Building the D4ST Containers</a></li></ul></li><li class="collapsible active"><a href="development-guide.html"><span class="enumeration enumeration0">Chapter&nbsp;3. </span>D4ST Development Guide</a><ul><li><a href="source_project_organization.html">Source Project Organization</a></li><li><a href="local_docker_setup.html">Local Docker Development Setup</a></li><li class=" active"><a href="building_updated_containers.html" class=" selected">Building, Testing, and Releasing Updated Containers</a></li></ul></li><li class="collapsible collapsed"><a href="../system-description/chapter-d4st-container-system-description.html"><span class="enumeration enumeration0">Chapter&nbsp;4. </span>D4ST Container System Description</a><ul><li><a href="../system-description/d4st-system-overview.html">D4ST System Overview</a></li><li><a href="../system-description/d4st-system-configuration.html">D4ST System Configuration</a></li></ul></li><li class="collapsible collapsed"><a href="../docker-container-ref/chapter-docker-container-ref.html"><span class="enumeration enumeration0">Chapter&nbsp;5. </span>Docker Container Reference</a><ul><li><a href="../docker-container-ref/container-ref-d4st-dita-ot.html">d4st/dita-ot</a></li><li><a href="../docker-container-ref/container-ref-link-manager-basex.html">D4ST Link Manager BaseX Docker Container</a></li><li><a href="../docker-container-ref/container-ref-d4st-gitlab.html">d4st/gitlab</a></li></ul></li><li class="collapsible collapsed"><a href="../../glossary/glossary.html">Glossary</a><ul><li class="collapsible collapsed"><a href="../../glossary/glossgroup-y.html">Y</a><ul><li><a href="../../glossary/gloss-yaml.html">YAML</a></li></ul></li></ul></li><li><a href="../../generated-index.html">Index</a></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"></nav><section id="page"><div class="topic concept"><a id="building_updated_containers" class="anchor"></a> <h1 class="title topictitle1">Building, Testing, and Releasing Updated Containers</h1> <div class="body conbody"><p class="shortdesc">How to build new versions of the various D4ST Docker containers.</p> <p class="p">All the D4ST Docker containers are managed through the Docker Hub web site and are built automatically whenever updates are pushed to each container's associated GitHub repository.</p> <p class="p">However, rebuildling the containers can take time because Docker Hub is a shared resource.</p> <p class="p">For local testing you can use the normal <span class="keyword cmdname">docker build</span> command to build a container in order to test changes. While it is possible to use <span class="keyword cmdname">docker-compose</span> to build a set of containers in one go, the D4ST Docker docker-compose files are not set up to do that because usually it's not that useful (because of the use of Docker Hub to manage official builds).</p> <p class="p">You also need to be careful that you're running the right container instance: it's easy to build a new container but still run an old image locally. The <span class="keyword cmdname">d4st</span> command includes options to clean up all D4ST containers and all D4ST images, which can be useful to clean up your local environment before doing local builds.</p> <div class="p">To do a full release-time regression test you should do the following:<ol class="ol" id="building_updated_containers__ol_ppd_gbd_kbb"> <li class="li">Merge all changes to the project's "develop" branch and otherwise ensure that everything appears to be working as it should.</li> <li class="li">Push all the projects's "develop" branch to GitHub. This will trigger rebuilding of all the containers on Docker Hub. You can use the Docker Hub web site to check the status of the automatic builds. The result will be new images for the "latest" and "develop" tags.</li> <li class="li">On a different system, ideally a Windows machine, do a "<span class="keyword cmdname">d4st pull</span>" to get the latest containers and then <span class="keyword cmdname">d4st start</span> followed by any operational tests you need to do to verify the functionality.</li> </ol></div> <p class="p">For a release, create a tag reflecting the release number in each git repository and push them to GitHub. This will again trigger creation of containers that reflect the tag name.</p> <p class="p">Create a new D4ST Docker release package and create the release on the d4st-docker GitHub project. </p> </div> <div class="related-links"></div> <footer id="topicsNPLinks"><div id="footer_previous"><a href="../../d4st-docker-guide/development/local_docker_setup.html" class="previous" rel="internal">Local Docker Development Setup</a></div><div id="footer_next"><a href="../../d4st-docker-guide/system-description/chapter-d4st-container-system-description.html" class="next" rel="internal">D4ST Container System Description</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>