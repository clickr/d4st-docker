<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Getting Started With Docker</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="concept"><meta name="description" content="The Docker tool is a powerful way to manage software distribution but like anything it has a few quirks."><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="docker-orientation"><script type="text/javascript">var d4p = {"relativePath":"..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"dfst-docker-guide\/getting-started\/virtual-box.html","previousTopicHref":"dfst-docker-guide\/getting-started\/dfst-container-quick-start-01.html","ext":".html","root":false,"topic":{"chunked":""},"map":{"title":"\n      DITA for Small Teams\n        D4ST Docker Usage Guide\n    ","chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../../themes/dita-d4p-classic/js/script.js"></script></head><body class="en-us dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">
      DITA for Small Teams
        D4ST Docker Usage Guide
    </h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><secion class="clearfix"></secion></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../../index.html">Table of Contents</a></li><li><a href="../frontmatter/about-dfst-docker-guide.html">About This Publication</a></li><li class="collapsible active"><a href="getting-started.html"><span class="enumeration enumeration0">Chapter 1. </span>Getting Started</a><ul><li><a href="dfst-container-quick-start-01.html">D4ST Container Quick Start</a></li><li class=" active"><a href="docker-orientation.html" class=" selected">Getting Started With Docker</a></li><li><a href="virtual-box.html">VirtualBox Notes and Details</a></li></ul></li><li class="collapsible collapsed"><a href="../extending/extending_the_dfst_docker_system.html"><span class="enumeration enumeration0">Chapter 2. </span>Extending the D4ST Docker System</a><ul><li><a href="../extending/building_the_dfst_containers.html">Building the D4ST Containers</a></li><li><a href="../extending/configuring_your_own_containers.html">Configuring Your Own Containers</a></li></ul></li><li class="collapsible collapsed"><a href="../system-description/chapter-dfst-container-system-description.html"><span class="enumeration enumeration0">Chapter 3. </span>D4ST Container System Description</a><ul><li><a href="../system-description/dfst-system-overview.html">D4ST System Overview</a></li><li><a href="../system-description/dfst-system-configuration.html">D4ST System Configuration</a></li></ul></li><li class="collapsible collapsed"><a href="../docker-container-ref/chapter-docker-container-ref.html"><span class="enumeration enumeration0">Chapter 4. </span>Docker Container Reference</a><ul><li><a href="../docker-container-ref/container-ref-dfst-dita-ot.html">dfst/dita-ot</a></li><li><a href="../docker-container-ref/container-ref-link-manager-basex.html">D4ST Link Manager BaseX Docker Container</a></li><li><a href="../docker-container-ref/container-ref-dfst-gitlab.html">dfst/gitlab</a></li></ul></li><li class="collapsible collapsed"><a href="../../glossary/glossary.html">Glossary</a><ul><li class="collapsible collapsed"><a href="../../glossary/glossgroup-y.html">Y</a><ul><li><a href="../../glossary/gloss-yaml.html">YAML</a></li></ul></li></ul></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"></nav><section id="page"><div><a id="docker-orientation" class="anchor"></a> <h1 class="title topictitle1">Getting Started With Docker</h1> <div class="body conbody"><p class="shortdesc">The Docker tool is a powerful way to manage software distribution but like anything it has a few quirks.</p> <p class="p">Docker is a way to package software of any sort into "containers" that can be run on any platform. Containers can be connected to each other and can access data on a local machine. The Docker infrastructure makes it create, share, and manage containers. Basically, anybody can create container images, post them to the public <a data-keyref="website-docker-hub" class="xref external" href="https://hub.docker.com">Docker Hub</a>, and anybody else can then get and run those containers with a minimum of effort.</p> <p class="p">Each Docker container is a separate virtual machine running a version of Linux and whatever additional software has been put into the container. The computer running the containers is called the <dfn class="term">host</dfn>, e.g., your laptop or a dedicated server machine, whether within your internal corporate network or on a hosting site like Amazon Web Services or Microsoft Azure.</p> <p class="p">On Linux hosts the containers run more or less directly on top of the host operating system. This makes a few things easier, such as connecting to local file systems and access the container via the network.</p> <p class="p">On Windows and OS X the containers run inside a separate virtual machine, the <dfn class="term">docker machine</dfn>, that then runs the containers. This makes things a little more complicated as regards accessing the containers via the network and mounting local file systems but those things can still be done, it must requires a little more effort.</p> <p class="p">See the main Docker documentation for details. This topic is here to get you started quickly and to provide specific guidance for Windows and OS X users since we expect the D4ST system to be used mostly by users under Windows or OS X.</p> <p class="p">For OS X and Windows, Docker provides a separate application, Kitematic, that provides a user interface for working with the Docker system. It's main value is under OS X where it provides the service of creating new properly-configured terminal windows. Otherwise it's not that interesting, at least in the context of the D4ST Docker containers.</p> </div> <section class="topic concept" id="concept_eyr_yg3_v5"> <h2 class="title topictitle2">Running Docker Containers</h2> <div class="body conbody"> <div class="p">To run a container you use the <samp class="ph codeph">docker run</samp> command from the command line:<pre class="pre codeblock">$ docker run <var class="keyword varname">container-image-name</var></pre></div> <div class="p">Where <var class="keyword varname">container-image-name</var> is the name of the container image you want to run, e.g. "dfst/dita-ot". Images have tags, with the default tag being "latest". You can specify the tag as <samp class="ph codeph">:<var class="keyword varname">tagname</var></samp> after the image name:<pre class="pre codeblock">$ docker run dfst/dita-ot:1.8.5</pre></div> <p class="p">The first time you run a container Docker will look for the image locally and if it doesn't find it will try to download it from the Docker Hub, which is a public repository of Docker images. All the D4ST images and the images they depend on are available through the Docker Hub.</p> <div class="p">If you need to get an image directly you use the <samp class="ph codeph">docker pull</samp> command:<pre class="pre codeblock">$ docker pull <var class="keyword varname">container-image-name</var></pre></div> <div class="p">As for the <samp class="ph codeph">docker run</samp> command, you can specify a tag if you want:<pre class="pre codeblock">$ docker pull dfst/dita-ot:1.8.5</pre></div> <p class="p">The <samp class="ph codeph">docker run</samp> command has many parameters you can specify the configure the container when you run it. Use <samp class="ph codeph">docker run help</samp> to get details or see the <a data-keyref="website-docker-docs" class="xref external" href="https://docs.docker.com">Docker documentation</a>.</p> <p class="p">What happens when you run a container depends on how the container is configured and how you run it.</p> <p class="p">If a container is intended to provide a continuously-running server, like the dfst/link-manager-basex or gitlab/gitlab-ce containers, then when you start it the container stays running until you stop it. Internally container is just a normal Linux system running the server, whatever it is. You can use the <samp class="ph codeph">docker exec</samp> command to access the container and run other commands inside the container or otherwise inspect what's happening inside it.</p> <div class="p">If the container does not provide a server, as is the case with the dfst/dita-ot container, then when you run it it will start and then stop. The container will still be available within the Docker machine but it won't be active. Other containers can use its published volumes (directories) but it won't be doing anything. For these containers you can use the <span class="keyword parmname">-it</span> parameters to the <samp class="ph codeph">docker run</samp> command to start an interactive shell within the container, e.g.:<pre class="pre codeblock">$ docker run -it dfst/dita-ot
dita-ot@d0a0800202ba:~/DITA-OT$ </pre></div> <p class="p">You now have a command shell within the container where you can issue normal Linux commands. The initial environment you find in the container is determined by the container's configuration as determined by whoever set up the container.</p> <div class="p">When you start a container it gets a unique numeric ID assigned to to it, the <dfn class="term">container ID</dfn>. You can also give your container a name when you run it:<pre class="pre codeblock">$ docker run <strong class="ph b">--name=dita-ot</strong> -it dfst/dita-ot</pre></div> <div class="p">You can then use that name anywhere a container ID is expected:<pre class="pre codeblock">$ docker exec -it dita-ot /bin/bash</pre></div> <p class="p">This command starts a new bash shell within the dita-ot container. The <span class="keyword parmname">-it</span> parameters again create an interactive shell. If you don't specify <span class="keyword parmname">-it</span> then the command you specify (<samp class="ph codeph">/bin/bash</samp> in this case) will run and then the container will stop again.</p> </div> </section> <section class="topic concept" id="concept_qmp_4k3_v5"> <h2 class="title topictitle2">The Docker Machine</h2> <div class="body conbody"> <p class="p">The thing that manages the running of Docker containers is the <dfn class="term">docker machine</dfn>. It is normally started automatically for you but you may need to start it manually. How you start it depends on your operating system. You sometimes need to interact with the Docker machine to determine what IP address is is using (Windows and OS X) or to see what its status is.</p> <p class="p">Under Windows the Docker engine is started as a Windows service automatically and you shouldn't have to worry about under normal circumstances.</p> <div class="p">Under OS X the engine should be started automatically on system startup but you may need to start it manually, which you do with the <samp class="ph codeph">docker-machine start</samp> command:<pre class="pre codeblock">$ docker-machine start default
Starting "default"...
(default) Waiting for an IP...
Machine "default" was started.
Started machines may have new IP addresses. You may need to re-run the `docker-machine env` command.
$ </pre></div> <p class="p">Here the name "<samp class="ph codeph">default</samp>" refers to the default Docker machine. You can have different Docker machines, although normally you only have one running and it will be known as the default machine.</p> <div class="p">Under Windows and OS X you will need to know what IP address has been assigned to the docker machine so that you can connect to servers runing in containers managed by that machine. You do this with the <samp class="ph codeph">docker-machine ip <var class="keyword varname">machinename</var></samp> command:<pre class="pre codeblock">$ docker-machine ip default
192.168.99.100
$</pre></div> <div class="p">If you need to kill the Docker machine you use the <samp class="ph codeph">docker-machine kill</samp> command:<pre class="pre codeblock">$  docker-machine kill default
Killing "default"...
Machine "default" was killed.
$</pre></div> <p class="p">Note that killing the Docker machine will kill any containers running in the machine.</p> <p class="p">On OS X and Windows the Docker machine uses a separate virtual machine running Linux to then run the containers. By default it uses the open-source VirtualBox VM but you can also use VMWare if you have it available. VMWare is a little more powerful and can make things like reading and writing to local directories easier.</p> <p class="p">On OS X you need to set some environment variables in the terminal window you're using to run the <samp class="ph codeph">docker</samp> command so that it knows how to connect to the Docker machine (also known as the Docker daemon).</p> <p class="p">If you use the Kitematic tool to start a Docker terminal window the environment will be set up for you.</p> <div class="p">If you want to use another terminal window you can set the environment using the command:<pre class="pre codeblock">eval $(docker-machine env default)</pre></div> <p class="p">This runs the <samp class="ph codeph">docker-machine env default</samp> command, which generates a set of <samp class="ph codeph">export</samp> commands and then evaluates those to set your environment directly. You have to use this dynamic way of setting the environment because the details of the Docker daemon may change whenever it's started.</p> <p class="p">You can put this line into your <span class="ph filepath">~/.bashrc</span> file and then it will be run automatically whenever you start a new shell. If for some reason it doesn't run you can force it to run by doing <samp class="ph codeph">source ~/.bashrc</samp> in your terminal window.</p> <p class="p">If you see a message like "Cannot connect to the Docker daemon. Is the docker daemon running on this host? " it means you need to set up the environment in one of these ways.</p> </div> </section> <footer id="topicsNPLinks"><div id="footer_previous"><a href="../../dfst-docker-guide/getting-started/dfst-container-quick-start-01.html" class="previous" rel="internal">D4ST Container Quick Start</a></div><div id="footer_next"><a href="../../dfst-docker-guide/getting-started/virtual-box.html" class="next" rel="internal">VirtualBox Notes and Details</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>